<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ahoron - Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #7c3aed;
      --secondary: #ec4899;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
      color: #1f2937;
    }

    .gradient-text {
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .gradient-bg {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
    }

    .btn-glow:hover {
      box-shadow: 0 0 15px rgba(124, 58, 237, 0.5);
    }

    .input-focus:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4">
  <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-12 items-center">

    <div class="hidden md:block animate_animated animate_fadeInLeft">
      <div class="relative">
        <div class="absolute -top-20 -left-20 w-64 h-64 bg-purple-200 rounded-full blur-xl opacity-70"></div>
        <div class="absolute -bottom-16 -right-16 w-64 h-64 bg-pink-200 rounded-full blur-xl opacity-70"></div>
        <div class="absolute top-1/2 -right-20 w-64 h-64 bg-yellow-200 rounded-full blur-xl opacity-70"></div>

        <div class="relative z-10">
          <div class="mb-8">
            <span class="text-4xl font-extrabold gradient-text flex items-center">
              <i class="fas fa-compass mr-3"></i>Ahoron
            </span>
          </div>

          <h1 class="text-4xl font-bold text-gray-900 mb-6">
            Welcome back to your <span class="gradient-text">career journey</span>
          </h1>

          <p class="text-lg text-gray-600 mb-8 leading-relaxed">
            Login to explore university clubs, find mentors, and take the next step in your academic and professional
            life.
          </p>
        </div>
      </div>
    </div>

    <div
      class="animate_animated animate_fadeInRight bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 w-full">
      <div class="p-8 sm:p-10">
        <div class="text-center mb-8">
          <h2 class="text-3xl font-bold text-gray-900 mb-2">Login to Ahoron</h2>
          <p class="text-gray-600">Enter your details below</p>
        </div>

        <form class="space-y-6" id="loginForm">
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fas fa-envelope text-gray-400"></i>
              </div>
              <input id="email" name="email" type="email" required
                class="input-focus pl-10 w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none transition duration-200"
                placeholder="you@example.com" />
            </div>
          </div>

          <div>
            <div class="flex justify-between items-center mb-1">
              <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
              <a href="forgot_password.html" class="text-sm text-purple-600 hover:text-purple-500 font-medium">Forgot?</a>
            </div>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fas fa-lock text-gray-400"></i>
              </div>
              <input id="password" name="password" type="password" required
                class="input-focus pl-10 w-full py-3 px-4 border border-gray-300 rounded-lg focus:outline-none transition duration-200"
                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
              <button type="button" class="absolute right-3 top-3 text-gray-400 hover:text-gray-500" id="togglePassword">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>

          <div class="flex items-center">
            <input id="remember" name="remember" type="checkbox"
              class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded" />
            <label for="remember" class="ml-2 block text-sm text-gray-700">Remember me</label>
          </div>

          <div>
            <button type="submit"
              class="gradient-bg w-full flex justify-center py-3.5 px-4 rounded-lg text-lg font-medium text-white hover:shadow-md transition-all btn-glow">
              Login
              <i class="fas fa-arrow-right ml-2 mt-1"></i>
            </button>
          </div>
        </form>

        <div class="mt-8 text-center">
          <p class="text-sm text-gray-600">
            Don't have an account?
            <a href="signup.html" class="text-purple-600 hover:text-purple-500 font-medium">Create one</a>
          </p>
        </div>
      </div>
    </div>
  </div>

  <script>
   
  document.addEventListener('DOMContentLoaded', function () {
    console.log("üîß Login page script loaded");

    const loginForm = document.getElementById('loginForm');
    const togglePasswordBtn = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');

    if (!loginForm || !togglePasswordBtn || !passwordInput) {
      console.error("‚ùå Required form elements not found!");
      return;
    }

    // Toggle password visibility
    togglePasswordBtn.addEventListener('click', function () {
      const icon = this.querySelector('i');
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        icon.classList.replace('fa-eye', 'fa-eye-slash');
      } else {
        passwordInput.type = 'password';
        icon.classList.replace('fa-eye-slash', 'fa-eye');
      }
    });

    // Handle login form submission
    loginForm.addEventListener('submit', async function (e) {
      e.preventDefault();
      console.log("üöÄ Login button clicked");

      const email = document.getElementById('email').value.trim();
      const password = passwordInput.value.trim();

      if (!email || !password) {
        alert('‚ö†Ô∏è Please enter both email and password.');
        return;
      }

      try {
        const response = await fetch('http://localhost:3000/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });

        const data = await response.json();
        console.log('Login response:', data);

        if (data.success) {
          localStorage.setItem('username', data.name);
          localStorage.setItem('email', data.email);

          if (data.role === 'instructor') {
  localStorage.setItem('instructor_id', data.id); // Store the instructor id
  localStorage.setItem('instructorName', data.name);
  window.location.href = 'i_dashboard.html';
} else {
  alert(`Welcome ${data.name}! Redirecting...`);
  window.location.href = data.redirect || 'dashboard.html';
}

        } else {
          alert(data.message || '‚ùå Invalid email or password');
        }
      } catch (error) {
        console.error('üí• Login error:', error);
        alert('Server error, please try again later.');
      }
    });
  });


  </script>
</body>

</html>